<!--
GENERATED FILE - DO NOT EDIT
This file was generated by [MarkdownSnippets](https://github.com/SimonCropp/MarkdownSnippets).
Source File: /docs/mdsource/RefactoringTutorial.source.md
To change this file edit the source file and then run MarkdownSnippets.
-->
<!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->
**Contents**

- [Refactoring To Async Tutorial](#refactoring-to-async-tutorial)
  - [Prep](#prep)
  - [Step by Step](#step-by-step)
    - [1. Call the method in question from a test](#1-call-the-method-in-question-from-a-test)
    - [2. Take the 1st thing that fails and create an `InputPipe` of it's parameters](#2-take-the-1st-thing-that-fails-and-create-an-inputpipe-of-its-parameters)
    - [3. Place a ApprovalTests to get insight into the pipeline.](#3-place-a-approvaltests-to-get-insight-into-the-pipeline)
    - [4. Add a process as a delegate](#4-add-a-process-as-a-delegate)
    - [4. Add a collector, and send input in](#4-add-a-collector-and-send-input-in)
    - [5. Repeat](#5-repeat)

<!-- END doctoc generated TOC please keep comment here to allow auto update -->

# Refactoring To Async Tutorial

## Prep

Download the [sample exercise](https://github.com/arlobelshee/legacycharexample)

## Step by Step

### 1. Call the method in question from a test

Simply call the method you wish to refactor from a test.
Don't think of this as a traditonal unit test. Think of it more as a specialized `main()` method

### 2. Take the 1st thing that fails and create an `InputPipe` of it's parameters

``` cs
 var startingPoint = new InputPipe<InputType>("InputNamme");
 ```
 
 ### 3. Place a ApprovalTests to get insight into the pipeline.
 
 Place this right in the middle of the production code you want to refactor. It is a temporary step.
 
 ``` cs 
  PipelineApprovals.verify(startingPoint);
 ```
 
 With a DotReporter
 
 ``` cs 
 [UseReporter(typeof(DotReporter))]
 ```

### 4. Add a process as a delegate

``` cs
 var methodCallPipe = startingPoint.process(TheMethodCall)
```

### 4. Add a collector, and send input in

``` cs
 var methodCallCollector = methodCallPipe.Collect();
 startingPoint.Send(firstParameter);
 var variable = methodCallCollector.SingleOrDefault;
```

### 5. Repeat

