<!--
GENERATED FILE - DO NOT EDIT
This file was generated by [MarkdownSnippets](https://github.com/SimonCropp/MarkdownSnippets).
Source File: /docs/mdsource/Pipelines.source.md
To change this file edit the source file and then run MarkdownSnippets.
-->
<!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->
**Contents**

- [Creating Pipelines](#creating-pipelines)
  - [Basic pipelines](#basic-pipelines)
  - [But Why?!?!](#but-why)

<!-- END doctoc generated TOC please keep comment here to allow auto update -->

## Creating Pipelines

### Basic pipelines

Let's say you have the following line of code:

<!-- snippet: basic_code_line -->
```cs
var result = long.Parse(age);
```
<sup>[snippet source](/Refactoring.Pipelines.Test/PipelineTests.cs#L24-L26)</sup>
<!-- endsnippet -->

You can refactor this to pipelines with the following

<!-- snippet: basic_pipeline -->
```cs
var inputPipe = new InputPipe<string>("age");
var parsePipe = inputPipe.Process(long.Parse);
var collector = parsePipe.Collect();

inputPipe.Send("42");
var result = collector.SingleResult;
```
<sup>[snippet source](/Refactoring.Pipelines.Test/PipelineTests.cs#L31-L38)</sup>
<!-- endsnippet -->

These will produce the same results.

### But Why?!?!

Dispite the complexity add of this code, this pattern has some advantages in refactoring to async 
as well has advantages in monitoring. It also has advantages in testing and visualization.
For example the pipeline can reder itself as the following dot file (Graphviz)

![GraphViz of Pipeline](/Refactoring.Pipelines.Test/PipelineTests.BasicPipelineTest.approved.dot.svg)
